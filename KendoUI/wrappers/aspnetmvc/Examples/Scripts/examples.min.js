(function(e,t){function a(){v.sessionStorage&&(g=sessionStorage.getItem("kendoSkin"),g&&r.changeTheme(g))}function n(a){var n=t.kendoMobileOS;v.sessionStorage&&(t.kendoMobileOS=sessionStorage.getItem("kendoMobileOS")||n),e(a).removeClass(k).addClass("km-"+n),e("#device-wrapper").removeClass("ios android blackberry").addClass(n),e("#deviceList .selectedThumb").removeClass("selectedThumb"),e("#deviceList ."+n+"Thumb").parent().addClass("selectedThumb")}function i(){return!1}function o(e){var t=e.split("/");return t[t.length-2]}function s(e,t){var a=t.eq(0),n=t.eq(1);e.siblings().removeClass("active").end().addClass("active"),a.attr("href",e.prev().find("a").attr("href")||a.data("widget")),n.attr("href",e.next().find("a").attr("href")||n.data("widget"))}var r,l=document,c=e.extend,d=t.kendo,h=".detailHandle",f={show:{effects:"expandVertical fadeIn",duration:300},hide:{effects:"expandVertical fadeIn",duration:300,reverse:!0,hide:!0}},m={show:{effects:"fadeIn",duration:300},hide:{effects:"fadeOut",duration:300}},u=/kendo\.\w+(\.min)?\.(.+)/i,p=/kendo\.dataviz\.(?!min)\w+?(\.css|\.min.css)/gi,v={sessionStorage:function(){try{return sessionStorage.setItem("kendo-test","success!"),sessionStorage.removeItem("kendo-test"),!!sessionStorage.getItem}catch(e){return!1}}(),pushState:"pushState"in history};r={load:function(e){this.unload(),r.fetch(e),v.pushState&&history.pushState({href:e},null,e)},loadWidget:function(e){this.unload(),this.fetchWidget(e),v.pushState&&history.pushState({href:e},null,e)},fetch:function(t,a){var n=e("#exampleWrap"),i=this.href,o=e("#main");(t!==i||a)&&(this.href=t,e.get(t,{partial:1},function(a){n.kendoStop(!0).kendoAnimate(c({},m.hide,{complete:function(){var n=e("#examples-nav li").removeClass("active"),i=e(e.grep(n,function(a){return t.indexOf(e(a).find("a").attr("href"))>-1})).addClass("active");s(i,e("#nav-pager a")),o.replaceWith(a),setTimeout(function(){e("#exampleWrap").css("visibility","visible").kendoStop(!0).kendoAnimate(m.show),r.initMobile()},100)}}))},"html"))},fetchWidget:function(t){var a=e("#mainWrapInner");e.get(t+"?nav=true",function(n){var i,o=t.split("/"),s=o[o.length-2],l=e(".dashboards li").removeClass("active"),d=e(".narrowCol:not(.mobile-devices, .dashboards), .wideCol").find("li").removeClass("active");"dashboards"==s?(d=l,i=function(a){return t==e(a).find("a").attr("href")}):i=function(t){var a=e(t.children[0]).attr("href").split("/");return a[a.length-2]==s},e(e.grep(d,i)).addClass("active"),"dashboards"==s||"overview"==s?e("#themeWrap").hide():-1==t.indexOf("mobile")&&e("#themeWrap").show(),e("#mainWrap").toggleClass("widgetOverview",t.indexOf("overview")>-1),a.kendoStop(!0).kendoAnimate(c({},m.hide,{complete:function(){a.replaceWith(n),setTimeout(function(){e("#exampleWrap").css("visibility","visible").kendoStop(!0).kendoAnimate(m.show),r.initMobile()},100)}}))},"html")},unload:function(){d.ui&&d.ui.DatePicker&&(d.ui.DatePicker.sharedCalendar=null),d.destroy("body > .k-popup"),e(l.body).find(".k-window-content").each(function(t,a){a=e(a).data("kendoWindow"),a&&(a.setOptions({deactivate:function(){a.destroy()}}),a.close())}),e("#example").find("[data-role=droptargetarea]").length||d.destroy("#example"),e(l).off(".examples").trigger("kendo:pageUnload")},preloadStylesheet:function(t,a){var n=e("<link rel='stylesheet' media='print' href='"+t+"' />").appendTo("head");setTimeout(function(){a(),n.remove()},100)},getCurrentThemeLink:function(){return e("head link").filter(function(){return/kendo\./gi.test(this.href)&&!/common|rtl|dataviz/gi.test(this.href)})},getCurrentDVThemeLink:function(){return e("head link").filter(function(){return p.test(this.href)})},getThemeUrl:function(e){var t=r.getCurrentThemeLink().attr("href");return t.replace(u,"kendo."+e+"$1.$2")},getDVThemeUrl:function(e){var t=r.getCurrentDVThemeLink().attr("href");return t?t.replace(p,"kendo.dataviz."+e+"$1"):void 0},replaceWebTheme:function(a){var n=r.getThemeUrl(a),i=e(l).data("kendoSkin"),o=t.less,s=r.getCurrentThemeLink(),c=/\.less$/.test(s.attr("href")),d=e("#example");r.updateLink(s,n),c&&(e("head style[id^='less']").remove(),o.sheets=e("head link[href$='.less']").map(function(){return this}),o.refresh(!0)),d.length&&(d[0].style.cssText=d[0].style.cssText),e(l).data("kendoSkin",a),e(l.documentElement).removeClass("k-"+i).addClass("k-"+a)},replaceDVTheme:function(e){var t=r.getDVThemeUrl(e),a=r.getCurrentDVThemeLink();t&&r.updateLink(a,t)},updateLink:function(t,a){var n,i=e("#example");d.support.browser.msie?n=e(l.createStyleSheet(a)):(n=t.eq(0).clone().attr("href",a),t.eq(0).before(n)),i.length&&(i[0].style.cssText=i[0].style.cssText),t.remove()},replaceTheme:function(t){r.replaceWebTheme(t),r.replaceDVTheme(t),e("#example").trigger("kendo:skinChange")},changeTheme:function(t,a){r.getThemeUrl(t)!=r.getCurrentThemeLink().attr("href")&&(a?r.preloadStylesheet(r.getThemeUrl(t),function(){var a=e("#example");a.kendoStop().kendoAnimate(c({},m.hide,{complete:function(e){e[0]==a[0]&&(a.css("visibility","hidden"),r.replaceTheme(t),setTimeout(function(){a.css("visibility","visible").kendoStop().kendoAnimate(m.show)},100))}}))}):r.replaceTheme(t))},init:function(){if(e("#exampleWrap").css("visibility","visible"),v.pushState){e(l).on("click","#examples-nav li a",function(t){var a=e(this),n=this.href;t.preventDefault(),location.href.match(n)||(s(a.parent(),e("#nav-pager a")),r.load(n))}).on("click","#nav-pager a",function(t){var a=e(this),n=a.attr("href"),o=a.siblings(),s=a.hasClass("prev")?"prev":"next",l=e("#examples-nav li.active"),c=l[s](),d=e("#nav-pager a").eq("next"==s?1:0),h=d.data("widget");t.preventDefault(),c[0]?(c.addClass("active"),l.removeClass("active"),o.removeClass("k-state-disabled").attr("href",location.href),c=c[s](),c[0]?a.attr("href",c.children("a").attr("href")):a.attr("href",h||"#").toggleClass("k-state-disabled",!h),r.load(n)):h&&(a.add(o).bind("click",i),r.loadWidget(h))}),e(t).bind("popstate",function(e){var t,a=e.originalEvent.state;a&&(t=a.href.toLowerCase(),r.unload(),o(t)!=o(r.href)||t.indexOf("overview")>-1?r.fetchWidget(t):r.fetch(t))}),r.href=location.href;try{history.replaceState({href:location.href},null,location.href)}catch(a){}}e(l).on("mouseenter mouseleave",h,function(t){var a=e(this),n=a.next();e.trim(n.text())&&a.toggleClass("detailHover","mouseenter"==t.type)}).on("click",h,function(){var t=e(this),a=t.next(),n=a.is(":visible");e.trim(a.text())&&(a.kendoStop(!0).kendoAnimate(n?f.hide:f.show,n,function(){e(this).css("height","")}),e(".detailExpanded,.detailCollapsed",this).toggleClass("detailExpanded",!n).toggleClass("detailCollapsed",n),t.toggleClass("detailHandleExpanded",!n))}),e(l).data("kendoSkin",g),e("#qr").off().click(function(t){var a=e("#qrBig");a.toggle();var n=a.is(":visible")?"Hide QR Code":"Show QR Code";e(this).children("em").html(n),t.preventDefault(),t.stopPropagation()}),e("#deviceChooser").mobileOsChooser({container:"#mobile-application-container"})},initMobile:function(){e("#qr").off().click(function(t){var a=e("#qrBig");a.toggle();var n=a.is(":visible")?"Hide QR Code":"Show QR Code";e(this).children("em").html(n),t.preventDefault(),t.stopPropagation()}),n("#mobile-application-container")}};var g="default";t.kendoMobileOS="ios",e(r.init);var k="km-ios km-android km-blackberry km-ios4";e.fn.mobileOsChooser=function(t){var a=e("#deviceList");if(1!=a.length)return this;var i=new d.data.DataSource({data:[{text:"iOS",value:"ios"},{text:"Android",value:"android"},{text:"Blackberry",value:"blackberry"}]});i.read(),n(t.container);var o=d.template(e("#deviceThumbTemplate").html());return a.html(d.render(o,i.view())),a.find(".osName,.osThumb").click(function(){var t=e(this).closest("li");if(v.sessionStorage){if(sessionStorage.getItem("kendoMobileOS")===t.children(".osThumb").text())return;sessionStorage.setItem("kendoMobileOS",t.children(".osThumb").text()),t.siblings().removeClass("selectedThumb").end().addClass("selectedThumb"),r.fetch(location.href,!0)}}),this},e(document).ready(function(){var t=e("#header a[href=#expand]"),a=e("#header").find(".submenu-box");t.click(function(n){var i=e(this);a.fadeOut(),i.toggleClass("expanded"),t.not(i).removeClass("expanded"),i.siblings(".submenu-box").not(":animated").fadeToggle(250),n.stopPropagation(),n.preventDefault()}),e(document).click(function(){a.fadeOut(),t.removeClass("expanded")})});var b=d.ui.Widget,C=b.extend({init:function(t,a){a=a||{},v.sessionStorage&&(a.theme=sessionStorage.getItem("kendoSkin")),a.theme=a.theme||C.prototype.options.theme,b.prototype.init.call(this,t,a),this._render(),this.setTheme(a.theme),this.element.on("click touchend",".tc-link",e.proxy(function(t){t.preventDefault();var a=e(t.target).closest(".tc-link").find(".k-icon"),n=a.hasClass("k-i-arrow-s");a.toggleClass("k-i-arrow-s",!n).toggleClass("k-i-arrow-n",n),this._getThemeContainer().animate({height:"toggle",margin:"toggle",paddingBottom:"toggle"},"fast")},this))},_getThemeContainer:function(){var t=this,a=this.options,n=e(a.listContainer).children(".tc-theme-container");return n.length?n:(n=e("<ul class='tc-theme-container' />").prependTo(a.listContainer),n.on("click",".tc-link",function(a){a.preventDefault();var i=e(this),o=i.attr("data-value");i.hasClass("active")||(n.find(".tc-link").removeClass("active"),i.addClass("active"),t.setTheme(o),r.changeTheme(o,!0))}),n.html(d.render(a.itemTemplate,a.themes)),n)},setTheme:function(e){for(var t,a=this.options.themes,n=0;a.length>n;n++)a[n].value==e?(t=a[n],t.selected=!0):a[n].selected=!1;this.element.find(".tc-theme-name").text(t.text),v.sessionStorage&&sessionStorage.setItem("kendoSkin",e)},_render:function(){var e=this.options.label;this.element.addClass("k-theme-chooser").html((e?"<span class='tc-choose-theme'>"+e+"</span>":"")+"<a class='tc-link k-state-selected' href='#'>"+"<span class='tc-theme-name'></span>"+"<span class='k-icon k-i-arrow-s'></span>"+"</a>")},options:{name:"ThemeChooser",label:"Choose theme:",theme:"default",listContainer:"#mainWrapInner",itemTemplate:d.template("<li class='tc-theme'><a href='\\#' class='tc-link#= data.selected ? ' active' : '' #' data-value='#= data.value #'># for (var i = 0; i < data.colors.length; i++) { #<span class='tc-color' style='background-color: #= data.colors[i] #'></span># } #<span class='tc-theme-name'>#= data.text #</span></a></li>",{useWithBlock:!1}),themes:[{text:"Default",value:"default",colors:["#ef6f1c","#e24b17","#5a4b43","#ededed"]},{text:"Blue Opal",value:"blueopal",colors:["#076186","#7ed3f6","#94c0d2","#daecf4"]},{text:"Bootstrap",value:"bootstrap",colors:["#0044cc","#0088cc","#333333","#e6e6e6"]},{text:"Silver",value:"silver",colors:["#298bc8","#515967","#bfc6d0","#eaeaec"]},{text:"Uniform",value:"uniform",colors:["#666666","#cccccc","#e7e7e7","#ffffff"]},{text:"Metro",value:"metro",colors:["#8ebc00","#787878","#e5e5e5","#ffffff"]},{text:"Black",value:"black",colors:["#0167cc","#4698e9","#272727","#000000"]},{text:"Metro Black",value:"metroblack",colors:["#00aba9","#0e0e0e","#333333","#565656"]},{text:"High Contrast",value:"highcontrast",colors:["#b11e9c","#880275","#664e62","#1b141a"]},{text:"Moonlight",value:"moonlight",colors:["#ee9f05","#40444f","#2f3640","#212a33"]}]}});d.ui.plugin(C),c(t,{Application:r,applyCurrentMobileOS:n,applyCurrentTheme:a,preventFOUC:function(){e("#exampleWrap").css("visibility","hidden")}})})(jQuery,window);