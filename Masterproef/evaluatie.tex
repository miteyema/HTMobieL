\chapter{Evaluatie}
\label{chap:evaluatie}

In dit hoofdstuk voeren we de vergelijking uit en bekijken we de bekomen resultaten.
Enerzijds vergelijken we in \ref{sec:evaluatie-poc} de implementatie van de POC in de verschillende raamwerken.
Anderzijds vergelijken we in \ref{sec:evaluatie-criteria} de raamwerken op basis van de vergelijkscriteria opgesteld in hoofdstuk \ref{chap:vergelijking}.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{POC}
\label{sec:evaluatie-poc}
In deze sectie bekijken we de problemen die we hebben tegengekomen bij het implementeren van de POC in de verschillende raamwerken.
Er wordt een onderscheid gemaakt tussen enerzijds de functionele vereisten als anderzijds vereisten met betrekking tot lay-out.

\subsection{Functionele vereisten}
Hieronder bespreken we de functionele vereisten van de POC.

\subsubsection{Formulieren}

\paragraph{jQuery Mobile} 
Voor het toevoegen van placeholders in de formuliervelden kon beroep worden gedaan op het \code{placeholder} attribuut in HTML5. Er dienden geen labels te worden gezet voor de velden. Deze labels zijn echter wel verplicht in jQuery Mobile, maar kunnen onzichtbaar worden gemaakt met de \code{ui-hide-label} CSS klasse~\cite{JQuery2013}. Wat wel opmerkelijk is wanneer men een formulier invult, daarna verstuurt en dan terugkeert, het formulier nog alle waarden bevat. Men moet na het formulier te hebben verstuurd, zelf het formulier altijd leegmaken. Dit kan met behulp van JavaScript via de \code{reset()}-functie op het formulier.

Sommige velden waren verplicht in te vullen, terwijl andere niet. Hiervoor werd eerst gedacht om het \code{required} attribuut in HTML5 te gebruiken. Het probleem is echter dat er geen ondersteuning is voor mobiele browsers~\cite{Deveria2013}. Daarnaast was het ook nodig om de velden te valideren op hun waarde. Validatie is echter niet standaard aanwezig in jQuery Mobile. Als oplossing werd de plugin van Jörn Zaefferer gebruikt~\cite{Zaefferer2013}. Deze plugin loste ook het probleem met de verplichte velden op. Deze plugin kan op twee manieren gebruikt worden: enerzijds schrijven van CSS klassen in de HTML-code ofwel anderzijds door programmatie in de JavaScript-code. Beide aanpakken werden getest doorheen de POC. 
% TODO verder uitleggen hoe slim de plugin is

\subsubsection{Opladen van bewijs}

\paragraph{jQuery Mobile} 
Het opladen van een bestand kan gebeuren door \code{file} als invoertype van het formulierveld te gebruiken. In versie 1.2 wordt dit veld nog niet opgemaakt, maar dit gebeurt wel in versie 1.3~\cite{JQuery2013d}. Voor het kan worden doorgestuurd naar de backend, moet het bewijs eerst lokaal worden omgevormd naar base64. Dit werd geïmplementeerd met de FileReaderAPI en het canvas, wat beide HTML5 specificaties zijn. Het aangeklikte bestand wordt gelezen door middel van de FileReaderAPI, waarna het als afbeelding wordt opgeslagen en geïmporteerd wordt op het canvas. Eenmaal geïmporteerd, kan men de \code{.toDataURL()} oproepen op het canvas om de geïmporteerde afbeelding om te vormen naar base64. Deze aanpak werkt correct op recente mobiele apparaten. De FileReaderAPI wordt echter niet ondersteund op Android versies 2.3 en lager of iOS versies lager dan 6.0~\cite{Deveria2013a}.

\subsubsection{Handtekening}

\paragraph{jQuery Mobile} 
Er werd gezocht naar een plugin om deze functionaliteit te bekomen, doordat jQuery Mobile dit niet standaard aanbiedt. Eerst werd gewerkt met Signature Pad van Thomas Bradley~\cite{Bradley2013}. Door de lange tijd die werd besteed aan het aanpassen van layout, werd overgestapt naar jSignature van Willow Systems~\cite{Systems2013}. Deze laatste gaf ook het voordeel dat de breedte van het gebied om te handtekening in te zetten, zich automatisch naar 100\% schaalde. De plugin maakt gebruik van het HTML5 canvas element en de \code{.toDataURL()} methode, maar deze wordt niet ondersteund op Android versies 2.3 en lager~\cite{Systems2013}.

\subsubsection{AJAX}

\paragraph{jQuery Mobile} 
Het maken van oproepen via AJAX gebeurt via de jQuery bibliotheek waar jQuery Mobile op steunt. Dit gebeurt met de functie \code{\$.ajax} waar onder andere kan ingesteld worden wat het te verwachten antwoord is (zoals tekst, HTML, JSON of XML). Bij het succesvol uitvoeren van de oproep wordt de \code{succes} functie opgeroepen, bij faling de \code{error} functie.

\subsubsection{JSON}

\paragraph{jQuery Mobile} 
In jQuery is er de functie \code{parseJSON} aanwezig, maar aangezien we in de AJAX oproep instellen dat we JSON verwachten, parst jQuery al automatisch het antwoord. Hierdoor hebben we \code{parseJSON} niet nodig en kunnen we direct omgaan met het antwoord.

Het is ook nodig om JSON te versturen als oproep. Dit wordt gedaan vanuit JavaScript zonder een bibliotheek nodig te hebben. Eerst wordt een object aangemaakt met inhoud, waarop daarna de functie \code{JSON.stringify} oproepen wordt. Deze is daarna klaar om verstuurd te worden als data via AJAX.

\subsubsection{XML}

\paragraph{jQuery Mobile} 
Net zoals bij JSON het geval was, was het ook niet nodig om expliciet de \code{parseXML} functie te gebruiken. Het doorlopen en opvragen van gegevens uit het XML-bestand vraagt wat meer werk. Waar je bij JSON direct aan de data kon, moet je bij XML de data ophalen net zoals je dat zou doen uit een HTML-pagina. Dit betekent dus met selectoren aan de hand van de jQuery bibliotheek.

\subsubsection{PDF}

\paragraph{jQuery Mobile} 
Het is niet aangeraden om ruwe data, zoals een PDF, op te halen via AJAX. Hierdoor werd gebruik gemaakt van een verborgen formulier met de nodige parameters die de PDF ophaalt bij de backend. Bij het klikken op een lijstitem in het overzicht, wordt dit verborgen formulier opgestuurd naar de backend die dan een PDF teruggeeft in de browser. Het weergeven van de PDF wordt overgelaten aan het mobiel apparaat dat de correcte applicatie hiervoor opstart.

\subsubsection{Automatische aanvulling}

\paragraph{jQuery Mobile} 
Hoewel versie 1.3 automatische aanvulling ter beschikking heeft~\cite{JQuery2013c}, werd tijdens de implementatie gebruik gemaakt van versie 1.2 die dit niet had. Daarom werd de plugin van Andy Matthews gebruikt~\cite{Matthews2013}. Dit is een zeer gemakkelijk te integreren plugin die zowel met lokale data als data op afstand kan werken. Daarnaast dienden enkel vijf suggesties te worden getoond. Deze functionaliteit zat niet in de plugin, maar werd geïmplementeerd met de JavaScript \code{slice} functie.

\subsection{Lay-out}
Hieronder bespreken we de vereisten met betrekking tot lay-out.

\subsubsection{Tablet en smartphone}

\paragraph{jQuery Mobile} 
In jQuery Mobile is er standaard geen splitview aanwezig om een menu te tonen voor tablets, maar niet voor smartphones. Eerst werd hiervoor gezocht naar plugins aan de hand van~\cite{Deering2012}, wat leidde tot: Splitview~\cite{Rahman2013}, SimpleSplitView~\cite{Yared2013} en Multiview~\cite{Franck2012}. Deze drie mogelijke kanshebbers hadden elk hun tekorten. Zo was de eerste destructief ten opzichte van het raamwerk. Dit betekent dat de bestanden van jQuery Mobile zelf werden aangepast, wat het moeilijker zou maken als men wil updaten naar een nieuwe versie. De tweede plugin werkte enkel tot versie 1.0.1 van jQuery Mobile. De laatste plugin had moeite met het zich  aanpassen aan veranderende afmetingen van de browser. 

Uiteindelijk werd van een plugin afgestapt door \cite{Hadlock2012} waarbij werd aangetoond hoe men via CSS3 media queries hetzelfde kan bereiken. Daarnaast gebruikt de documentatie van jQuery Mobile~\cite{JQuery2012b} een gelijkaardige layout. De uiteindelijke oplossing voor het probleem kwam uit te combinatie van deze twee voorgaande oplossingen.

\subsubsection{Koptekst en voettekst}

\paragraph{jQuery Mobile}
Het toevoegen van een koptekst en voettekst ging zonder enig probleem door gebruik te maken van \code{data-role="header"} en \code{data-role="footer"}. Wel moest dezelfde code op ieder scherm worden herhaald. Dit kan worden vermeden door gebruik te maken van eenzelfde \code{data-id} attribuut. Daarnaast werd de voettekst gefixeerd aan de onderkant van het scherm en de bijhorende logo's links en rechts uitgelijnd. Voor dit laatste werd gebruik gemaakt van de zogenaamde \term{grid} die jQuery Mobile aanbiedt. Deze voettekst wordt niet getoond op een smartphone, wat wordt bekomen door gebruik te maken van de CSS3 media queries.

Bij het toevoegen van een uitgave dient er een extra titel onder de koptekst te komen. Eerst werd geprobeerd om bovenaan een lijstdeler te plaatsen, maar dan schoof de inhoud van de pagina niet mee naar onder. De uiteindelijke oplossing kwam vanuit de documentatie \cite{JQuery2013b} om dit met behulp van de \code{ui-bar} CSS klasse te implementeren. Deze extra titel wordt ook gebruikt om op de smartphone naar de speciale smartphone navigatie te gaan.

\subsubsection{Knoppen}

\paragraph{jQuery Mobile} 
De kleur van de knoppen aanpassen kan op twee manieren. Ofwel schrijft men zelf de CSS-code ofwel gebruikt men ThemeRoller~\cite{JQuery2012c}. Deze laatste manier werd gebruikt om de knoppen groen te maken. Men sleept dan eenvoudigweg de groene kleur op de knop en daarna kan de bijhorende CSS-code worden gedownload. Door daarna de knop te annoteren met het \code{data-theme} attribuut activeert men het betreffende thema. Om de knop blauw te maken was er geen nood aan customizatie, doordat blauw al één van de standaard thema's was.

Knoppen toevoegen aan de koptekst gaat ook op een zeer eenvoudige manier.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Vergelijkscriteria}
\label{sec:evaluatie-criteria}