var EA={baseURL:"http://kulcapexpenseapp.appspot.com/",toBelgianDate:function(e){var t=e.getDate(),n=e.getMonth();return n+=1,10>t&&(t="0"+t),10>n&&(n="0"+n),t+"/"+n+"/"+e.getFullYear()},expenseTypeIdToString:function(e){return 1==e?"Hotel":2==e?"Lunch":3==e?"Diner":4==e?"Ticket":5==e?"Restaurant":6==e?"Other":"ERROR_TYPE"},expenseStatusIdToString:function(e){return 1==e?"New":2==e?"Verified":3==e?"Approved":4==e?"Paid out":5==e?"Disapproved":"ERROR_STATUS"},convertToEuro:function(e,t){var n=this.getRateForCurrency(t),r=e/n;return r.toFixed(2)},getRateForCurrency:function(e){var t=Lungo.Data.Storage.persistent("currencies");return Lungo.Core.findByProperty(t,"name",e).rate},base64Prefix:"data:image/png;base64,",base64WithoutPrefix:function(e){return e.substring(this.base64Prefix.length)},base64WithPrefix:function(e){return this.base64Prefix+e},getLocalExpenseById:function(e){var t=Lungo.Data.Storage.persistent("localExpenses");return Lungo.Core.findByProperty(t,"id",e)},formatEuro:function(e){var t=Number(e);return"â‚¬ "+t.toFixed(2)},sortExpensesAscending:function(e,t){var n=new Date(e.date),r=new Date(t.date);return n-r},sortExpensesDescending:function(e,t){var n=new Date(e.date),r=new Date(t.date);return r-n}},Quo;Quo=function(){var e,t,n;return t=[],e=function(t,r){var a;return t?"function"===e.toType(t)?e(document).ready(t):(a=e.getDOMObject(t,r),n(a,t)):n()},n=function(e,r){return e=e||t,e.__proto__=n.prototype,e.selector=r||"",e},e.extend=function(e){return Array.prototype.slice.call(arguments,1).forEach(function(t){var n,r;r=[];for(n in t)r.push(e[n]=t[n]);return r}),e},n.prototype=e.fn={},e}(),window.Quo=Quo,"$$"in window||(window.$$=Quo),function(e){var t,n,r,a,i,o,s,c;return t=[],a=Object.prototype,r=/^\s*<(\w+|!)[^>]*>/,i=document.createElement("table"),o=document.createElement("tr"),n={tr:document.createElement("tbody"),tbody:i,thead:i,tfoot:i,td:o,th:o,"*":document.createElement("div")},e.toType=function(e){return a.toString.call(e).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},e.isOwnProperty=function(e,t){return a.hasOwnProperty.call(e,t)},e.getDOMObject=function(t,n){var a,i,o;return a=null,i=[1,9,11],o=e.toType(t),"array"===o?a=s(t):"string"===o&&r.test(t)?(a=e.fragment(t.trim(),RegExp.$1),t=null):"string"===o?(a=e.query(document,t),n&&(a=1===a.length?e.query(a[0],n):e.map(function(){return e.query(a,n)}))):(i.indexOf(t.nodeType)>=0||t===window)&&(a=[t],t=null),a},e.map=function(t,n){var r,a,i,o;if(o=[],r=void 0,a=void 0,"array"===e.toType(t))for(r=0;t.length>r;)i=n(t[r],r),null!=i&&o.push(i),r++;else for(a in t)i=n(t[a],a),null!=i&&o.push(i);return c(o)},e.each=function(t,n){var r,a;if(r=void 0,a=void 0,"array"===e.toType(t))for(r=0;t.length>r;){if(n.call(t[r],r,t[r])===!1)return t;r++}else for(a in t)if(n.call(t[a],a,t[a])===!1)return t;return t},e.mix=function(){var t,n,r,a,i;for(r={},t=0,a=arguments.length;a>t;){n=arguments[t];for(i in n)e.isOwnProperty(n,i)&&void 0!==n[i]&&(r[i]=n[i]);t++}return r},e.fragment=function(t,r){var a;return null==r&&(r="*"),r in n||(r="*"),a=n[r],a.innerHTML=""+t,e.each(Array.prototype.slice.call(a.childNodes),function(){return a.removeChild(this)})},e.fn.map=function(t){return e.map(this,function(e,n){return t.call(e,n,e)})},e.fn.instance=function(e){return this.map(function(){return this[e]})},e.fn.filter=function(t){return e([].filter.call(this,function(n){return n.parentNode&&e.query(n.parentNode,t).indexOf(n)>=0}))},e.fn.forEach=t.forEach,e.fn.indexOf=t.indexOf,s=function(e){return e.filter(function(e){return void 0!==e&&null!==e})},c=function(e){return e.length>0?[].concat.apply([],e):e}}(Quo),function(e){var t,n,r,a,i,o,s;return r=null,t=/WebKit\/([\d.]+)/,n={Android:/(Android)\s+([\d.]+)/,ipad:/(iPad).*OS\s([\d_]+)/,iphone:/(iPhone\sOS)\s([\d_]+)/,Blackberry:/(BlackBerry|BB10|Playbook).*Version\/([\d.]+)/,FirefoxOS:/(Mozilla).*Mobile[^\/]*\/([\d\.]*)/,webOS:/(webOS|hpwOS)[\s\/]([\d.]+)/},e.isMobile=function(){return r=r||i(),r.isMobile&&"firefoxOS"!==r.os.name},e.environment=function(){return r=r||i()},e.isOnline=function(){return navigator.onLine},i=function(){var e,t;return t=navigator.userAgent,e={},e.browser=a(t),e.os=o(t),e.isMobile=!!e.os,e.screen=s(),e},a=function(e){var n;return n=e.match(t),n?n[0]:e},o=function(e){var t,r,a;t=null;for(r in n)if(a=e.match(n[r])){t={name:"iphone"===r||"ipad"===r?"ios":r,version:a[2].replace("_",".")};break}return t},s=function(){return{width:window.innerWidth,height:window.innerHeight}}}(Quo),function(e){var t,n,r,a,i,o;return r="parentNode",t=/^\.([\w-]+)$/,n=/^#[\w\d-]+$/,a=/^[\w-]+$/,e.query=function(e,r){var i;return r=r.trim(),t.test(r)?i=e.getElementsByClassName(r.replace(".","")):a.test(r)?i=e.getElementsByTagName(r):n.test(r)&&e===document?(i=e.getElementById(r.replace("#","")),i||(i=[])):i=e.querySelectorAll(r),i.nodeType?[i]:Array.prototype.slice.call(i)},e.fn.find=function(t){var n;return n=1===this.length?Quo.query(this[0],t):this.map(function(){return Quo.query(this,t)}),e(n)},e.fn.parent=function(e){var t;return t=e?o(this):this.instance(r),i(t,e)},e.fn.siblings=function(e){var t;return t=this.map(function(e,t){return Array.prototype.slice.call(t.parentNode.children).filter(function(e){return e!==t})}),i(t,e)},e.fn.children=function(e){var t;return t=this.map(function(){return Array.prototype.slice.call(this.children)}),i(t,e)},e.fn.get=function(e){return void 0===e?this:this[e]},e.fn.first=function(){return e(this[0])},e.fn.last=function(){return e(this[this.length-1])},e.fn.closest=function(t,n){var r,a;for(a=this[0],r=e(t),r.length||(a=null);a&&0>r.indexOf(a);)a=a!==n&&a!==document&&a.parentNode;return e(a)},e.fn.each=function(e){return this.forEach(function(t,n){return e.call(t,n,t)}),this},o=function(t){var n;for(n=[];t.length>0;)t=e.map(t,function(e){return(e=e.parentNode)&&e!==document&&0>n.indexOf(e)?(n.push(e),e):void 0});return n},i=function(t,n){return void 0===n?e(t):e(t).filter(n)}}(Quo),function(e){var t,n,r;return t=["-webkit-","-moz-","-ms-","-o-",""],e.fn.addClass=function(e){return this.each(function(){return r(e,this.className)?void 0:(this.className+=" "+e,this.className=this.className.trim())})},e.fn.removeClass=function(e){return this.each(function(){return e?r(e,this.className)?this.className=this.className.replace(e," ").replace(/\s+/g," ").trim():void 0:this.className=""})},e.fn.toggleClass=function(e){return this.each(function(){return r(e,this.className)?this.className=this.className.replace(e," "):(this.className+=" "+e,this.className=this.className.trim())})},e.fn.hasClass=function(e){return r(e,this[0].className)},e.fn.style=function(e,t){return t?this.each(function(){return this.style[e]=t}):this[0].style[e]||n(this[0],e)},e.fn.css=function(e,t){return this.style(e,t)},e.fn.vendor=function(e,n){var r,a,i,o;for(o=[],a=0,i=t.length;i>a;a++)r=t[a],o.push(this.style(""+r+e,n));return o},r=function(e,t){var n;return n=t.split(/\s+/g),n.indexOf(e)>=0},n=function(e,t){return document.defaultView.getComputedStyle(e,"")[t]}}(Quo),function(e){return e.fn.attr=function(t,n){return 0===this.length,"string"===e.toType(t)&&void 0===n?this[0].getAttribute(t):this.each(function(){return this.setAttribute(t,n)})},e.fn.removeAttr=function(e){return this.each(function(){return this.removeAttribute(e)})},e.fn.data=function(e,t){return this.attr("data-"+e,t)},e.fn.removeData=function(e){return this.removeAttr("data-"+e)},e.fn.val=function(t){return"string"===e.toType(t)?this.each(function(){return this.value=t}):this.length>0?this[0].value:null},e.fn.show=function(){return this.style("display","block")},e.fn.hide=function(){return this.style("display","none")},e.fn.height=function(){var e;return e=this.offset(),e.height},e.fn.width=function(){var e;return e=this.offset(),e.width},e.fn.offset=function(){var e;return e=this[0].getBoundingClientRect(),{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:e.width,height:e.height}},e.fn.remove=function(){return this.each(function(){return null!=this.parentNode?this.parentNode.removeChild(this):void 0})}}(Quo),function(e){return e.fn.text=function(t){return t||"number"===e.toType(t)?this.each(function(){return this.textContent=t}):this[0].textContent},e.fn.html=function(t){var n;return n=e.toType(t),t||"number"===n||"string"===n?this.each(function(){var e,r,a,i;if("string"===n||"number"===n)return this.innerHTML=t;if(this.innerHTML=null,"array"===n){for(i=[],r=0,a=t.length;a>r;r++)e=t[r],i.push(this.appendChild(e));return i}return this.appendChild(t)}):this[0].innerHTML},e.fn.append=function(t){var n;return n=e.toType(t),this.each(function(){var e=this;return"string"===n?this.insertAdjacentHTML("beforeend",t):"array"===n?t.each(function(t,n){return e.appendChild(n)}):this.appendChild(t)})},e.fn.prepend=function(t){var n;return n=e.toType(t),this.each(function(){var e=this;return"string"===n?this.insertAdjacentHTML("afterbegin",t):"array"===n?t.each(function(t,n){return e.insertBefore(n,e.firstChild)}):this.insertBefore(t,this.firstChild)})},e.fn.replaceWith=function(t){var n;return n=e.toType(t),this.each(function(){var e=this;return this.parentNode?"string"===n?this.insertAdjacentHTML("beforeBegin",t):"array"===n?t.each(function(t,n){return e.parentNode.insertBefore(n,e)}):this.parentNode.insertBefore(t,this):void 0}),this.remove()},e.fn.empty=function(){return this.each(function(){return this.innerHTML=null})}}(Quo),function(e){var t,n,r,a,i,o,s,c,u,l,d;return t={TYPE:"GET",MIME:"json"},r={script:"text/javascript, application/javascript",json:"application/json",xml:"application/xml, text/xml",html:"text/html",text:"text/plain"},n=0,e.ajaxSettings={type:t.TYPE,async:!0,success:{},error:{},context:null,dataType:t.MIME,headers:{},xhr:function(){return new window.XMLHttpRequest},crossDomain:!1,timeout:0},e.ajax=function(n){var r,s,l;if(s=e.mix(e.ajaxSettings,n),s.type===t.TYPE?s.url+=e.serializeParameters(s.data,"?"):s.url!=EA.baseURL+"resources/expenseService/saveExpense"&&(s.data=e.serializeParameters(s.data)),a(s.url))return e.jsonp(s);l=s.xhr(),l.onreadystatechange=function(){return 4===l.readyState?(clearTimeout(r),u(l,s)):void 0},l.open(s.type,s.url,s.async),c(l,s),s.timeout>0&&(r=setTimeout(function(){return d(l,s)},s.timeout));try{l.send(s.data)}catch(f){l=f,o("Resource not found",l,s)}return s.async?l:i(l,s)},e.jsonp=function(t){var r,a,i,o;return t.async?(a="jsonp"+ ++n,i=document.createElement("script"),o={abort:function(){return e(i).remove(),a in window?window[a]={}:void 0}},r=void 0,window[a]=function(n){return clearTimeout(r),e(i).remove(),delete window[a],l(n,o,t)},i.src=t.url.replace(RegExp("=\\?"),"="+a),e("head").append(i),t.timeout>0&&(r=setTimeout(function(){return d(o,t)},t.timeout)),o):console.error("QuoJS.ajax: Unable to make jsonp synchronous call.")},e.get=function(t,n,r,a){return e.ajax({url:t,data:n,success:r,dataType:a})},e.post=function(e,t,n,r){return s("POST",e,t,n,r)},e.put=function(e,t,n,r){return s("PUT",e,t,n,r)},e["delete"]=function(e,t,n,r){return s("DELETE",e,t,n,r)},e.json=function(n,r,a){return e.ajax({url:n,data:r,success:a,dataType:t.MIME})},e.serializeParameters=function(e,t){var n,r;null==t&&(t=""),r=t;for(n in e)e.hasOwnProperty(n)&&(r!==t&&(r+="&"),r+=""+encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return r===t?"":r},u=function(e,t){e.status>=200&&300>e.status||0===e.status?t.async&&l(i(e,t),e,t):o("QuoJS.ajax: Unsuccesful request",e,t)},l=function(e,t,n){n.success.call(n.context,e,t)},o=function(e,t,n){n.error.call(n.context,e,t,n)},c=function(e,t){var n;t.contentType&&(t.headers["Content-Type"]=t.contentType),t.dataType&&(t.headers.Accept=r[t.dataType]);for(n in t.headers)e.setRequestHeader(n,t.headers[n])},d=function(e,t){e.onreadystatechange={},e.abort(),o("QuoJS.ajax: Timeout exceeded",e,t)},s=function(t,n,r,a,i){return e.ajax({type:t,url:n,data:r,success:a,dataType:i,contentType:"application/x-www-form-urlencoded"})},i=function(e,n){var r;if(r=e.responseText)if(n.dataType===t.MIME)try{r=JSON.parse(r)}catch(a){r=a,o("QuoJS.ajax: Parse Error",e,n)}else"xml"===n.dataType&&(r=e.responseXML);return r},a=function(e){return RegExp("=\\?").test(e)}}(Quo),function(e){var t,n,r,a,i,o,s,c,u,l,d,f;return t=1,a={},r={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"},n={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",touch:"click",doubletap:"dblclick",orientationchange:"resize"},i=/complete|loaded|interactive/,e.fn.on=function(t,n,r){return"undefined"===n||"function"===e.toType(n)?this.bind(t,n):this.delegate(n,t,r)},e.fn.off=function(t,n,r){return"undefined"===n||"function"===e.toType(n)?this.unbind(t,n):this.undelegate(n,t,r)},e.fn.ready=function(t){return i.test(document.readyState)?t(e):e.fn.addEvent(document,"DOMContentLoaded",function(){return t(e)})},e.Event=function(e,t){var n,r;if(n=document.createEvent("Events"),n.initEvent(e,!0,!0,null,null,null,null,null,null,null,null,null,null,null,null),t)for(r in t)n[r]=t[r];return n},e.fn.bind=function(e,t){return this.each(function(){d(this,e,t)})},e.fn.unbind=function(e,t){return this.each(function(){f(this,e,t)})},e.fn.delegate=function(t,n,r){return this.each(function(a,i){d(i,n,r,t,function(n){return function(r){var a,s;return s=e(r.target).closest(t,i).get(0),s?(a=e.extend(o(r),{currentTarget:s,liveFired:i}),n.apply(s,[a].concat([].slice.call(arguments,1)))):void 0}})})},e.fn.undelegate=function(e,t,n){return this.each(function(){f(this,t,n,e)})},e.fn.trigger=function(t,n){return"string"===e.toType(t)&&(t=e.Event(t,n)),this.each(function(){this.dispatchEvent(t)})},e.fn.addEvent=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},e.fn.removeEvent=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},d=function(t,n,r,i,o){var u,d,f,h;return n=c(n),f=l(t),d=a[f]||(a[f]=[]),u=o&&o(r,n),h={event:n,callback:r,selector:i,proxy:s(u,r,t),delegate:u,index:d.length},d.push(h),e.fn.addEvent(t,h.event,h.proxy)},f=function(t,n,r,i){var o;return n=c(n),o=l(t),u(o,n,r,i).forEach(function(n){return delete a[o][n.index],e.fn.removeEvent(t,n.event,n.proxy)})},l=function(e){return e._id||(e._id=t++)},c=function(t){var r;return r=e.isMobile()?t:n[t],r||t},s=function(e,t,n){var r;return t=e||t,r=function(e){var r;return r=t.apply(n,[e].concat(e.data)),r===!1&&e.preventDefault(),r}},u=function(e,t,n,r){return(a[e]||[]).filter(function(e){return!(!e||t&&e.event!==t||n&&e.callback!==n||r&&e.selector!==r)})},o=function(t){var n;return n=e.extend({originalEvent:t},t),e.each(r,function(e,r){return n[e]=function(){return this[r]=function(){return!0},t[e].apply(t,arguments)},n[r]=function(){return!1}}),n}}(Quo),function($$){var CURRENT_TOUCH,FIRST_TOUCH,GESTURE,GESTURES,HOLD_DELAY,TAPS,TOUCH_TIMEOUT,_angle,_capturePinch,_captureRotation,_cleanGesture,_distance,_fingersPosition,_getTouches,_hold,_isSwipe,_listenTouches,_onTouchEnd,_onTouchMove,_onTouchStart,_parentIfText,_swipeDirection,_trigger;return TAPS=null,GESTURE={},FIRST_TOUCH=[],CURRENT_TOUCH=[],TOUCH_TIMEOUT=void 0,HOLD_DELAY=650,GESTURES=["touch","tap","singleTap","doubleTap","hold","swipe","swiping","swipeLeft","swipeRight","swipeUp","swipeDown","rotate","rotating","rotateLeft","rotateRight","pinch","pinching","pinchIn","pinchOut","drag","dragLeft","dragRight","dragUp","dragDown"],GESTURES.forEach(function(e){return $$.fn[e]=function(t){var n;return n="touch"===e?"touchend":e,$$(document.body).delegate(this.selector,n,t)},this}),$$(document).ready(function(){return _listenTouches()}),_listenTouches=function(){var e;return e=$$(document.body),e.bind("touchstart",_onTouchStart),e.bind("touchmove",_onTouchMove),e.bind("touchend",_onTouchEnd),e.bind("touchcancel",_cleanGesture)},_onTouchStart=function(e){var t,n,r,a;return r=Date.now(),t=r-(GESTURE.last||r),TOUCH_TIMEOUT&&clearTimeout(TOUCH_TIMEOUT),a=_getTouches(e),n=a.length,FIRST_TOUCH=_fingersPosition(a,n),GESTURE.el=$$(_parentIfText(a[0].target)),GESTURE.fingers=n,GESTURE.last=r,GESTURE.taps||(GESTURE.taps=0),GESTURE.taps++,1===n?(n>=1&&(GESTURE.gap=t>0&&250>=t),setTimeout(_hold,HOLD_DELAY)):2===n?(GESTURE.initial_angle=parseInt(_angle(FIRST_TOUCH),10),GESTURE.initial_distance=parseInt(_distance(FIRST_TOUCH),10),GESTURE.angle_difference=0,GESTURE.distance_difference=0):void 0},_onTouchMove=function(e){var t,n,r;return GESTURE.el&&(r=_getTouches(e),t=r.length,t===GESTURE.fingers?(CURRENT_TOUCH=_fingersPosition(r,t),n=_isSwipe(e),n&&(GESTURE.prevSwipe=!0),(n||GESTURE.prevSwipe===!0)&&_trigger("swiping"),2===t&&(_captureRotation(),_capturePinch(),e.preventDefault())):_cleanGesture()),!0},_isSwipe=function(){var e,t,n;return e=!1,CURRENT_TOUCH[0]&&(t=Math.abs(FIRST_TOUCH[0].x-CURRENT_TOUCH[0].x)>30,n=Math.abs(FIRST_TOUCH[0].y-CURRENT_TOUCH[0].y)>30,e=GESTURE.el&&(t||n)),e},_onTouchEnd=function(){var e,t,n,r,a;return _trigger("touch"),1!==GESTURE.fingers?(e=!1,0!==GESTURE.angle_difference&&(_trigger("rotate",{angle:GESTURE.angle_difference}),r=GESTURE.angle_difference>0?"rotateRight":"rotateLeft",_trigger(r,{angle:GESTURE.angle_difference}),e=!0),0!==GESTURE.distance_difference&&(_trigger("pinch",{angle:GESTURE.distance_difference}),n=GESTURE.distance_difference>0?"pinchOut":"pinchIn",_trigger(n,{distance:GESTURE.distance_difference}),e=!0),!e&&CURRENT_TOUCH[0]&&(Math.abs(FIRST_TOUCH[0].x-CURRENT_TOUCH[0].x)>10||Math.abs(FIRST_TOUCH[0].y-CURRENT_TOUCH[0].y)>10)&&(_trigger("drag"),t=_swipeDirection(FIRST_TOUCH[0].x,CURRENT_TOUCH[0].x,FIRST_TOUCH[0].y,CURRENT_TOUCH[0].y),_trigger("drag"+t)),_cleanGesture()):2===GESTURE.taps&&GESTURE.gap?(_trigger("doubleTap"),_cleanGesture()):_isSwipe()||GESTURE.prevSwipe?(_trigger("swipe"),a=_swipeDirection(FIRST_TOUCH[0].x,CURRENT_TOUCH[0].x,FIRST_TOUCH[0].y,CURRENT_TOUCH[0].y),_trigger("swipe"+a),_cleanGesture()):(_trigger("tap"),1===GESTURE.taps?TOUCH_TIMEOUT=setTimeout(function(){return _trigger("singleTap"),_cleanGesture()},100):void 0)},_fingersPosition=function(e,t){var n,r;for(r=[],n=0,e=e[0].targetTouches?e[0].targetTouches:e;t>n;)r.push({x:e[n].pageX,y:e[n].pageY}),n++;return r},_captureRotation=function(){var angle,diff,i,symbol;if(angle=parseInt(_angle(CURRENT_TOUCH),10),diff=parseInt(GESTURE.initial_angle-angle,10),Math.abs(diff)>20||0!==GESTURE.angle_difference){for(i=0,symbol=0>GESTURE.angle_difference?"-":"+";Math.abs(diff-GESTURE.angle_difference)>90&&10>i++;)eval("diff "+symbol+"= 180;");return GESTURE.angle_difference=parseInt(diff,10),_trigger("rotating",{angle:GESTURE.angle_difference})}},_capturePinch=function(){var e,t;return t=parseInt(_distance(CURRENT_TOUCH),10),e=GESTURE.initial_distance-t,Math.abs(e)>10?(GESTURE.distance_difference=e,_trigger("pinching",{distance:e})):void 0},_trigger=function(e,t){return GESTURE.el?(t=t||{},CURRENT_TOUCH[0]&&(t.iniTouch=GESTURE.fingers>1?FIRST_TOUCH:FIRST_TOUCH[0],t.currentTouch=GESTURE.fingers>1?CURRENT_TOUCH:CURRENT_TOUCH[0]),GESTURE.el.trigger(e,t)):void 0},_cleanGesture=function(){return FIRST_TOUCH=[],CURRENT_TOUCH=[],GESTURE={},clearTimeout(TOUCH_TIMEOUT)},_angle=function(e){var t,n,r;return t=e[0],n=e[1],r=Math.atan(-1*(n.y-t.y)/(n.x-t.x))*(180/Math.PI),0>r?r+180:r},_distance=function(e){var t,n;return t=e[0],n=e[1],-1*Math.sqrt((n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y))},_getTouches=function(e){return $$.isMobile()?e.touches:[e]},_parentIfText=function(e){return"tagName"in e?e:e.parentNode},_swipeDirection=function(e,t,n,r){var a,i;return a=Math.abs(e-t),i=Math.abs(n-r),a>=i?e-t>0?"Left":"Right":n-r>0?"Up":"Down"},_hold=function(){return GESTURE.last&&Date.now()-GESTURE.last>=HOLD_DELAY?(_trigger("hold"),GESTURE.taps=0):void 0}}(Quo);var Lungo=Lungo||{};Lungo.VERSION="2.0",Lungo.Element||(Lungo.Element={}),Lungo.Data||(Lungo.Data={}),Lungo.Sugar||(Lungo.Sugar={}),Lungo.View||(Lungo.View={}),Lungo.Boot||(Lungo.Boot={}),Lungo.Device||(Lungo.Device={}),Lungo.ready||(Lungo.ready=Quo().ready),Lungo.Attributes={count:{selector:"*",html:'<span class="tag theme count">{{value}}</span>'},pull:{selector:"section",html:'<div class="{{value}}" data-control="pull" data-icon="down" data-loading="black">                    <strong>title</strong>                </div>'},progress:{selector:"*",html:'<div class="progress">                    <span class="bar"><span class="value" style="width:{{value}};"></span></span>                </div>'},label:{selector:"*",html:"<abbr>{{value}}</abbr>"},icon:{selector:"*",html:'<span class="icon {{value}}"></span>'},image:{selector:"*",html:'<img src="{{value}}" class="icon" />'},title:{selector:"header",html:'<span class="title centered">{{value}}</span>'},loading:{selector:"*",html:'<div class="loading {{value}}">                    <span class="top"></span>                    <span class="right"></span>                    <span class="bottom"></span>                    <span class="left"></span>                </div>'},back:{selector:"header",html:'<nav class="left"><a href="#back" data-router="section" class="left"><span class="icon {{value}}"></span></a></nav>'}},Lungo.Constants={ELEMENT:{SECTION:"section",ARTICLE:"article",ASIDE:"aside",BODY:"body",DIV:"div",LIST:"<ul></ul>",LI:"li"},QUERY:{LIST_IN_ELEMENT:"article.list, aside.list",ELEMENT_SCROLLABLE:"aside.scroll, article.scroll"},CLASS:{ACTIVE:"active",ASIDE:"aside",SHOW:"show",HIDE:"hide",HIDING:"hiding",RIGHT:"right",LEFT:"left",HORIZONTAL:"horizontal",SMALL:"small"},TRIGGER:{LOAD:"load",UNLOAD:"unload"},TRANSITION:{DURATION:350},ATTRIBUTE:{ID:"id",HREF:"href",TITLE:"title",ARTICLE:"article",CLASS:"class",WIDTH:"width",HEIGHT:"height",PIXEL:"px",PERCENT:"%",ROUTER:"router",FIRST:"first",LAST:"last",EMPTY:""},BINDING:{START:"{{",END:"}}",KEY:"value",SELECTOR:"{{value}}"},ERROR:{DATABASE:"ERROR: Connecting to Data.Sql.",DATABASE_TRANSACTION:"ERROR: Data.Sql >> ",ROUTER:"ERROR: The target does not exists >>",LOADING_RESOURCE:"ERROR: Loading resource: "}},Lungo.Core=function(e,t){var n=Array.prototype,r="#",a=function(t,n){e.Core.isMobile()||console[1===t?"log":2===t?"warn":"error"](n)},i=function(){var e=l(arguments),t=e.shift();"function"===u(t)&&t.apply(null,e)},o=function(e,t){return function(){return t.apply(e,l(arguments))}},s=function(){for(var e=e||{},t=0,n=arguments.length;n>t;t++){var r=arguments[t];for(var a in r)c(r,a)&&(e[a]=r[a])}return e},c=function(e,n){return t.isOwnProperty(e,n)},u=function(e){return t.toType(e)},l=function(e){return n.slice.call(e,0)},d=function(){return t.isMobile()},f=function(){return t.environment()},h=function(e,t,n){var r="desc"===n?-1:1;return e.sort(function(e,n){return e[t]<n[t]?-r:e[t]>n[t]?r:0})},g=function(e){var t=e.lastIndexOf(r);return t>0?e=e.substring(t):-1===t&&(e=r+e),e},p=function(e,t,n){for(var r=null,a=0,i=e.length;i>a;a++){var o=e[a];if(o[t]==n){r=o;break}}return r};return{log:a,execute:i,bind:o,mix:s,isOwnProperty:c,toType:u,toArray:l,isMobile:d,environment:f,orderByProperty:h,parseUrl:g,findByProperty:p}}(Lungo,Quo),Lungo.dom=function(e){return $$(e)},Lungo.Events=function(e){var t=" ",n=function(n){for(event in n){var r=event.indexOf(t);if(r>0){var a=event.substring(0,r),i=event.substring(r+1);e.dom(i).on(a,n[event])}}};return{init:n}}(Lungo),Lungo.Fallback=function(e){var t=function(){env=e.Core.environment(),env.isMobile&&"Android"===env.os.name&&"3">env.os.version?e.dom(document.body).data("position","absolute"):e.dom(document.body).data("position","fixed")};return{fixPositionInAndroid:t}}(Lungo),Lungo.init=function(e){e&&e.resources&&Lungo.Resource.load(e.resources),Lungo.Boot.Events.init(),Lungo.Boot.Data.init(),Lungo.Boot.Layout.init()},Lungo.Notification=function(e,t){var n=[],r=null,a=null,i=1,o=200,s=(e.Constants.ATTRIBUTE,e.Constants.BINDING),c={BODY:"body",NOTIFICATION:".notification",MODAL:".notification .window",MODAL_HREF:".notification .window a",WINDOW_CLOSABLE:".notification [data-action=close], .notification > .error, .notification > .success",CONFIRM_BUTTONS:".notification .confirm a.button"},u={MODAL:"modal",VISIBLE:"visible",SHOW:"show",WORKING:"working",INPUT:"input"},l='<div class="notification"><div class="window"></div></div>',d=function(n,r,a,i){var o;if(n!==t)o=C(n,null,r);else{var c=e.Attributes.loading.html;o=c.replace(s.START+s.KEY+s.END,"icon white")}E(o,"growl"),y(a,i)},f=function(){a.removeClass("show"),setTimeout(function(){r.style("display","none").removeClass("html").removeClass("confirm").removeClass("notify").removeClass("growl")},o-50)},h=function(e){n=e;var t=C(e.title,e.description,e.icon);t+=R(e.accept,"accept"),t+=R(e.cancel,"cancel"),E(t,"confirm")},g=function(e,t,n,r,a){v(e,t,n,"success",r,a)},p=function(e,t,n,r,a){v(e,t,n,"error",r,a)},v=function(e,t,n,r,a,i){E(C(e,t,n),r),a&&y(a,i)},T=function(e,t){e+=t?'<a href="#" class="button large anchor" data-action="close">'+t+"</a>":"",E(e,"html")},m=function(){e.dom(c.BODY).append(l),r=e.dom(c.NOTIFICATION),a=r.children(".window"),S()},E=function(e,t){r.show(),a.removeClass(u.SHOW),a.removeClass("error").removeClass("success").removeClass("html").removeClass("growl"),a.addClass(t),a.html(e),setTimeout(function(){a.addClass(u.SHOW)},i)},y=function(e,n){if(e!==t&&0!==e){var r=1e3*e;setTimeout(function(){f(),n&&setTimeout(n,o)},r)}},C=function(e,t,n){return t=t?t:"&nbsp;",'<span class="icon '+n+'"></span><strong class="text bold">'+e+"</strong><small>"+t+"</small>"},R=function(e,t){return'<a href="#" data-callback="'+t+'" class="button anchor large text thin">'+e.label+"</a>"},S=function(){e.dom(c.CONFIRM_BUTTONS).tap(function(){var t=e.dom(this),r=n[t.data("callback")].callback;r&&r.call(r),f()}),e.dom(c.WINDOW_CLOSABLE).tap(f)};return m(),{show:d,hide:f,error:p,success:g,confirm:h,html:T}}(Lungo),Lungo.Resource=function(e,t){var n=e.Constants.ELEMENT,r=e.Constants.ERROR,a=function(t){if("array"===e.Core.toType(t))for(var n=0,r=t.length;r>n;n++)i(t[n]);else i(t)},i=function(t){try{var n=o(t);s(n)}catch(r){e.Core.log(3,r.message)}},o=function(e){return t.ajax({url:e,async:!1,dataType:"html",error:function(){console.error(r.LOADING_RESOURCE+e)}})},s=function(t){"string"===e.Core.toType(t)&&e.dom(n.BODY).append(t)};return{load:a}}(Lungo,Quo),function(e,t){var n,r=e.document,a=r.documentElement,i="scroll-enabled",o="ontouchmove"in r,s="WebkitOverflowScrolling"in a.style||!o&&e.screen.width>1200||function(){var t=e.navigator.userAgent,n=t.match(/AppleWebKit\/([0-9]+)/),r=n&&n[1],a=n&&r>=534;return t.match(/Android ([0-9]+)/)&&RegExp.$1>=3&&a||t.match(/ Version\/([0-9]+)/)&&RegExp.$1>=0&&e.blackberry&&a||t.indexOf(/PlayBook/)>-1&&RegExp.$1>=0&&a||t.match(/Fennec\/([0-9]+)/)&&RegExp.$1>=4||t.match(/wOSBrowser\/([0-9]+)/)&&RegExp.$1>=233&&a||t.match(/NokiaBrowser\/([0-9\.]+)/)&&7.3===parseFloat(RegExp.$1)&&n&&r>=533}(),c=function(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t},u=!1,l=function(r,a){var i,o,s=0,c=r.scrollLeft,u=r.scrollTop,l={top:"+0",left:"+0",duration:100,easing:e.overthrow.easing};if(a)for(var d in l)a[d]!==t&&(l[d]=a[d]);return"string"==typeof l.left?(l.left=parseFloat(l.left),i=l.left+c):(i=l.left,l.left=l.left-c),"string"==typeof l.top?(l.top=parseFloat(l.top),o=l.top+u):(o=l.top,l.top=l.top-u),n=setInterval(function(){s++<l.duration?(r.scrollLeft=l.easing(s,c,l.left,l.duration),r.scrollTop=l.easing(s,u,l.top,l.duration)):(i!==r.scrollLeft&&(r.scrollLeft=i),o!==r.scrollTop&&(r.scrollTop=o),f())},1),{top:o,left:i,duration:l.duration,easing:l.easing}},d=function(e,t){return!t&&e.className&&e.className.indexOf("scroll")>-1&&e||d(e.parentNode)},f=function(){clearInterval(n)},h=function(){if(!u&&(u=!0,(s||o)&&(a.className+=" "+i),e.overthrow.forget=function(){a.className=a.className.replace(i,""),r.removeEventListener&&r.removeEventListener("touchstart",S,!1),e.overthrow.easing=c,u=!1},!s&&o)){var n,h,g,p,v=[],T=[],m=function(){v=[],h=null},E=function(){T=[],g=null},y=function(){var e=8*(v[0]-v[v.length-1]),t=8*(T[0]-T[T.length-1]),r=Math.max(Math.abs(t),Math.abs(e))/8;e=(e>0?"+":"")+e,t=(t>0?"+":"")+t,!isNaN(r)&&r>0&&(Math.abs(t)>80||Math.abs(e)>80)&&l(n,{left:t,top:e,duration:r})},C=function(e){p=n.querySelectorAll("textarea, input");for(var t=0,r=p.length;r>t;t++)p[t].style.pointerEvents=e},R=function(e,a){if(r.createEvent){var i,o=(!a||a===t)&&n.parentNode||n.touchchild||n;o!==n&&(i=r.createEvent("HTMLEvents"),i.initEvent("touchend",!0,!0),n.dispatchEvent(i),o.touchchild=n,n=o,o.dispatchEvent(e))}},S=function(e){if(f(),m(),E(),n=d(e.target),n&&n!==a&&!(e.touches.length>1)){C("none");var t=e,r=n.scrollTop,i=n.scrollLeft,o=n.offsetHeight,s=n.offsetWidth,c=e.touches[0].pageY,u=e.touches[0].pageX,l=n.scrollHeight,p=n.scrollWidth,S=function(e){var a=r+c-e.touches[0].pageY,d=i+u-e.touches[0].pageX,f=a>=(v.length?v[0]:0),y=d>=(T.length?T[0]:0);a>0&&l-o>a||d>0&&p-s>d?e.preventDefault():R(t),h&&f!==h&&m(),g&&y!==g&&E(),h=f,g=y,n.scrollTop=a,n.scrollLeft=d,v.unshift(a),T.unshift(d),v.length>3&&v.pop(),T.length>3&&T.pop()},w=function(){y(),C("auto"),setTimeout(function(){C("none")},450),n.removeEventListener("touchmove",S,!1),n.removeEventListener("touchend",w,!1)};n.addEventListener("touchmove",S,!1),n.addEventListener("touchend",w,!1)}};r.addEventListener("touchstart",S,!1)}};e.overthrow={set:h,forget:function(){},easing:c,toss:l,intercept:f,closest:d,support:s?"native":o&&"polyfilled"||"none"},h()}(this),Lungo.Service=function(e,t){var n="lungojs_service_cache",r={MINUTE:"minute",HOUR:"hour",DAY:"day"},a=function(e,n,r,a){return t.get(e,n,r,a)},i=function(e,n,r,a){return t.post(e,n,r,a)},o=function(e,n,r){return t.json(e,n,r)},s=function(n,r,a,i,o){var s=n+t.serializeParameters(r);if(!c(s,a))return t.get(n,r,function(e){f(s,e),i.call(i,e)},o);var u=e.Data.Storage.persistent(s);return u?i.call(i,u):void 0},c=function(t,r){var a=!1,i=e.Data.Storage.persistent(n);if(i){var o=u(i[t]);a=l(o,r)}return a},u=function(e){var t=(new Date).getTime(),n=new Date(e).getTime();return t-n},l=function(e,t){var n=t.split(" "),r=d(n[1],e);return n[0]>r?!0:!1},d=function(e,t){var n=t/1e3/60;return e.indexOf(r.HOUR)>=0?n/=60:e.indexOf(r.DAY)>=0&&(n=n/60/24),n},f=function(t,r){var a=e.Data.Storage.persistent(n)||{};a[t]=new Date,e.Data.Storage.persistent(n,a),e.Data.Storage.persistent(t,r)};return{get:a,post:i,json:o,cache:s,Settings:t.ajaxSettings}}(Lungo,Quo),Lungo.Boot.Data=function(e){var t=e.Constants.BINDING,n=function(t){var n=e.dom(t||document.body);n.length>0&&r(n)},r=function(t){for(var n in e.Attributes)e.Core.isOwnProperty(e.Attributes,n)&&a(t,n)},a=function(t,n){attribute=e.Attributes[n];var r=attribute.selector+"[data-"+n+"]";t.find(r).each(function(t,r){var a=e.dom(r);i(a,a.data(n),attribute.html)})},i=function(e,n,r){var a=r.replace(t.START+t.KEY+t.END,n);e.prepend(a)};return{init:n}}(Lungo),Lungo.Boot.Events=function(e){var t=e.Constants.ATTRIBUTE,n=(e.Constants.CLASS,e.Constants.ELEMENT),r={HREF_ASIDE:"header a[href][data-router=aside]",HREF_TARGET:"a[href][data-router]",HREF_TARGET_FROM_ASIDE:"aside a[href][data-router]",INPUT_CHECKBOX:"input[type=range].checkbox"},a=function(){e.dom(r.HREF_TARGET_FROM_ASIDE).tap(o),e.dom(r.HREF_TARGET).tap(i),e.dom(r.INPUT_CHECKBOX).tap(s),e.View.Aside.suscribeEvents(e.dom(r.HREF_ASIDE))},i=function(t){t.preventDefault();var n=e.dom(this);n.data("async")?u(n):c(n)},o=function(t){t.preventDefault(),e.View.Aside.hide()},s=function(t){t.preventDefault();var n=e.dom(this),r=n.val()>0?0:1;n.toggleClass("active").attr("value",r)},c=function(e){var r=e.data(t.ROUTER);switch(r){case n.SECTION:var a=e.attr(t.HREF);l(a);break;case n.ARTICLE:d(e);break;case n.ASIDE:f(e)}},u=function(n){e.Notification.show(),e.Resource.load(n.data("async")),n[0].removeAttribute("data-async"),e.Boot.Data.init(n.attr(t.HREF)),setTimeout(function(){c(n),e.Notification.hide()},2*e.Constants.TRANSITION.DURATION)},l=function(t){t=e.Core.parseUrl(t),"#back"===t?e.Router.back():e.Router.section(t)},d=function(n){var r=e.Router.History.current(),a=n.attr(t.HREF);e.Router.article(r,a,n)},f=function(n){var r=e.Router.History.current(),a=n.attr(t.HREF);e.Router.aside(r,a)};return{init:a}
}(Lungo),Lungo.Boot.Layout=function(e){var t=e.Constants.ELEMENT,n=e.Constants.CLASS,r=e.Constants.ATTRIBUTE,a=e.Constants.QUERY,i=function(){e.Fallback.fixPositionInAndroid(),o(),s(a.LIST_IN_ELEMENT,c),s(a.ELEMENT_SCROLLABLE,u)},o=function(){var a=e.dom(t.SECTION).first().addClass(n.SHOW);e.Element.Cache.section=a,e.Element.Cache.article=a.children(t.ARTICLE+"."+n.ACTIVE),e.View.Article.switchReferenceItems(e.Element.Cache.article.attr("id"),a);var i="#"+a.attr(r.ID);e.Router.History.add(i)},s=function(t,n){for(var r=e.dom(t),a=0,i=r.length;i>a;a++){var o=e.dom(r[a]);e.Core.execute(n,o)}},c=function(e){0===e.children().length&&(e.attr(r.ID),e.append(t.LIST))},u=function(e){e[0].addEventListener("touchstart",function(){scrollTop=this.scrollTop,1>=scrollTop&&(this.scrollTop=1),scrollTop+this.offsetHeight>=this.scrollHeight&&(this.scrollTop=this.scrollHeight-this.offsetHeight-1)},!1)};return{init:i}}(Lungo),Lungo.Data.Cache=function(e,t){var n={},r=function(t,r){n[t]=o(t)?e.Core.mix(a(t),r):r},a=function(e){return 1===arguments.length?n[e]:n[arguments[0]]?n[arguments[0]][arguments[1]]:t},i=function(e){1===arguments.length?delete n[e]:delete n[arguments[0]][arguments[1]]},o=function(e){return n[e]?!0:!1};return{set:r,get:a,remove:i,exists:o}}(Lungo),Lungo.Data.Sql=function(e){var t=e.Constants.ERROR,n={name:"lungo_db",version:"1.0",size:65536,schema:[]},r=null,a=function(a){if(n=e.Core.mix(n,a),r=openDatabase(n.name,n.version,n.name,n.size),!r)throw Error(t.DATABASE);l()},i=function(e,t,n){var r=t?" WHERE "+g(t,"AND"):"";u("SELECT * FROM "+e+r,function(e){for(var t=[],r=0,a=e.rows.length;a>r;r++)t.push(e.rows.item(r));p(n,t)})},o=function(t,n){if("object"===e.Core.toType(n))v(t,n);else for(row in n)v(t,n[row])},s=function(e,t,n){var r="UPDATE "+e+" SET "+g(t,",");n&&(r+=" WHERE "+g(n,"AND")),u(r)},c=function(e,t){var n=t?" WHERE "+g(t,"AND"):"";u("DELETE FROM "+e+n+";")},u=function(t,n){e.Core.log(1,"lng.Data.Sql >> "+t),r.transaction(function(e){e.executeSql(t,[],function(e,t){p(n,t)},function(e){e.executedQuery=t,T.apply(null,arguments)})})},l=function(){var e=n.schema,t=e.length;if(t)for(var r=0;t>r;r++){var a=e[r];f(a),d(a.name,a.fields)}},d=function(t,n){var r="";for(var a in n)e.Core.isOwnProperty(n,a)&&(r&&(r+=", "),r+=a+" "+n[a]);u("CREATE TABLE IF NOT EXISTS "+t+" ("+r+");")},f=function(e){e.drop===!0&&h(e.name)},h=function(e){u("DROP TABLE IF EXISTS "+e)},g=function(t,n){var r="";for(var a in t)if(e.Core.isOwnProperty(t,a)){var i=t[a];r&&(r+=" "+n+" "),r+=a+"=",r+=isNaN(i)?'"'+i+'"':i}return r},p=function(t,n){"function"===e.Core.toType(t)&&setTimeout(t,100,n)},v=function(t,n){var r="",a="";for(var i in n)if(e.Core.isOwnProperty(n,i)){var o=n[i];r+=r?", "+i:i,a&&(a+=", "),a+=isNaN(o)||""==o?'"'+o+'"':o}u("INSERT INTO "+t+" ("+r+") VALUES ("+a+")")},T=function(e,n){throw Error(t.DATABASE_TRANSACTION+n.code+": "+n.message+" \n Executed query: "+e.executedQuery)};return{init:a,select:i,insert:o,update:s,drop:c,execute:u}}(Lungo),Lungo.Data.Storage=function(){var e={PERSISTENT:"localStorage",SESSION:"sessionStorage"},t=function(t,n){return r(e.PERSISTENT,t,n)},n=function(t,n){return r(e.SESSION,t,n)},r=function(e,t,n){var e=window[e];if(n)a(e,t,n);else{if(null!==n)return o(e,t);i(e,t)}},a=function(e,t,n){n=JSON.stringify(n),e.setItem(t,n)},i=function(e,t){e.removeItem(t)},o=function(e,t){return value=e.getItem(t),JSON.parse(value)};return{session:n,persistent:t}}(Lungo),Lungo.Element.Cache={section:null,article:null,aside:null,navigation:null},Lungo.Element.Carousel=function(e,t){var n={index:0,speed:300,callback:t,container:e,element:e.children[0],slide:void 0,slides:[],slides_length:0,width:0,start:{},isScrolling:void 0,deltaX:0},r=function(){n.index&&c(n.index-1,n.speed)},a=function(){n.index<n.slides_length-1?c(n.index+1,n.speed):c(0,n.speed)},i=function(){return n.index},o=function(){s()},s=function(){if(n.slides=n.element.children,n.slides_length=n.slides.length,2>n.slides_length)return null;if(n.width="getBoundingClientRect"in n.container?n.container.getBoundingClientRect().width:n.container.offsetWidth,!n.width)return null;n.element.style.width=n.slides.length*n.width+"px";for(var e=n.slides.length;e--;){var t=n.slides[e];t.style.width=n.width+"px",t.style.display="table-cell",t.style.verticalAlign="top"}c(n.index,0),n.container.style.visibility="visible"},c=function(e,t){var r=n.element.style;void 0==t&&(t=n.speed),r.webkitTransitionDuration=r.MozTransitionDuration=r.msTransitionDuration=r.OTransitionDuration=r.transitionDuration=t+"ms",r.MozTransform=r.webkitTransform="translate3d("+-(e*n.width)+"px,0,0)",r.msTransform=r.OTransform="translateX("+-(e*n.width)+"px)",n.index=e},u=function(){n.element.addEventListener("touchstart",l,!1),n.element.addEventListener("touchmove",d,!1),n.element.addEventListener("touchend",f,!1),n.element.addEventListener("webkitTransitionEnd",h,!1),n.element.addEventListener("msTransitionEnd",h,!1),n.element.addEventListener("oTransitionEnd",h,!1),n.element.addEventListener("transitionend",h,!1),window.addEventListener("resize",s,!1)},l=function(e){n.start={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY,time:Number(new Date)},n.isScrolling=void 0,n.deltaX=0,n.element.style.MozTransitionDuration=n.element.style.webkitTransitionDuration=0,e.stopPropagation()},d=function(e){if(!(e.touches.length>1||e.scale&&1!==e.scale||(n.deltaX=e.touches[0].pageX-n.start.pageX,n.isScrolling===void 0&&(n.isScrolling=!!(n.isScrolling||Math.abs(n.deltaX)<Math.abs(e.touches[0].pageY-n.start.pageY))),n.isScrolling))){e.preventDefault();var t=!n.index&&n.deltaX>0||n.index==n.slides_length-1&&0>n.deltaX?Math.abs(n.deltaX)/n.width+1:1;n.deltaX=n.deltaX/t;var r=n.deltaX-n.index*n.width;n.element.style.MozTransform=n.element.style.webkitTransform="translate3d("+r+"px,0,0)",e.stopPropagation()}},f=function(e){var t=250>Number(new Date)-n.start.time&&Math.abs(n.deltaX)>20||Math.abs(n.deltaX)>n.width/2,r=!n.index&&n.deltaX>0||n.index==n.slides_length-1&&0>n.deltaX;n.isScrolling||c(n.index+(t&&!r?0>n.deltaX?1:-1:0),n.speed),e.stopPropagation()},h=function(){n.callback&&n.callback.apply(n.callback,[n.index,n.slides[n.index]])};return s(),u(),{prev:r,next:a,position:i,refresh:o}},Lungo.Element.Carousel=function(e,t){var n={gestureStarted:!1,index:0,speed:300,callback:t,container:e,element:e.children[0],slide:void 0,slides:[],slides_length:0,width:0,start:{},isScrolling:void 0,deltaX:0},r=function(){n.index&&c(n.index-1,n.speed)},a=function(){var e=n.index<n.slides_length-1?n.index+1:0;c(e,n.speed)},i=function(){return n.index},o=function(){s()},s=function(){if(n.slides=n.element.children,n.slides_length=n.slides.length,2>n.slides_length)return null;if(n.width="getBoundingClientRect"in n.container?n.container.getBoundingClientRect().width:n.container.offsetWidth,!n.width)return null;n.element.style.width=n.slides.length*n.width+"px";for(var e=n.slides.length;e--;){var t=n.slides[e];t.style.width=n.width+"px",t.style.display="table-cell",t.style.verticalAlign="top"}c(n.index,0),n.container.style.visibility="visible"},c=function(e,t){var r=n.element.style;void 0==t&&(t=n.speed),r.webkitTransitionDuration=r.MozTransitionDuration=r.msTransitionDuration=r.OTransitionDuration=r.transitionDuration=t+"ms",r.MozTransform=r.webkitTransform="translate3d("+-(e*n.width)+"px,0,0)",r.msTransform=r.OTransform="translateX("+-(e*n.width)+"px)",n.index=e},u=function(){$$(n.element).swiping(function(e){n.gestureStarted?_moveGesture(e):_startGesture(e)}),$$(n.element).swipe(l),$$(n.element).on("webkitTransitionEnd",d,!1),$$(n.element).on("msTransitionEnd",d,!1),$$(n.element).on("oTransitionEnd",d,!1),$$(n.element).on("transitionend",d,!1),$$(window).on("resize",s,!1)};_startGesture=function(e){n.start={pageX:e.currentTouch.x,pageY:e.currentTouch.y,time:Number(new Date)},n.isScrolling=void 0,n.deltaX=0,n.element.style.MozTransitionDuration=n.element.style.webkitTransitionDuration=0,"function"==typeof e.stopPropagation&&e.stopPropagation(),n.gestureStarted=!0},_moveGesture=function(e){if(n.deltaX=e.currentTouch.x-n.start.pageX,n.isScrolling===void 0&&(n.isScrolling=!!(n.isScrolling||Math.abs(n.deltaX)<Math.abs(e.currentTouch.y-n.start.pageY))),!n.isScrolling){e.preventDefault();var t=!n.index&&n.deltaX>0||n.index==n.slides_length-1&&0>n.deltaX?Math.abs(n.deltaX)/n.width+1:1;n.deltaX=n.deltaX/t;var r=n.deltaX-n.index*n.width;n.element.style.MozTransform=n.element.style.webkitTransform="translate3d("+r+"px,0,0)","function"==typeof e.stopPropagation&&e.stopPropagation()}};var l=function(){if(n.gestureStarted){var e=250>Number(new Date)-n.start.time&&Math.abs(n.deltaX)>20||Math.abs(n.deltaX)>n.width/2,t=!n.index&&n.deltaX>0||n.index==n.slides_length-1&&0>n.deltaX;n.isScrolling||c(n.index+(e&&!t?0>n.deltaX?1:-1:0),n.speed),"function"==typeof event.stopPropagation&&event.stopPropagation(),n.gestureStarted=!1}},d=function(){n.callback&&n.callback.apply(n.callback,[n.index,n.slides[n.index]])};return s(),u(),{prev:r,next:a,position:i,refresh:o}},Lungo.Element.count=function(e,t){var n=Lungo.dom(e);if(n.children(".bubble.count").remove(),n&&t){var r=Lungo.Constants.BINDING.SELECTOR;html=Lungo.Attributes.count.html.replace(r,t),n.append(html)}},Lungo.Element.loading=function(e,t){var n=Lungo.dom(e);if(n){var r=null;if(t){var a=Lungo.Constants.BINDING.SELECTOR;r=Lungo.Attributes.loading.html.replace(a,t)}n.html(r)}},Lungo.Element.progress=function(e,t){var n=Lungo.dom(e);n&&(t+=Lungo.Constants.ATTRIBUTE.PERCENT,n.find(".value").style(Lungo.Constants.ATTRIBUTE.WIDTH,t))},Lungo.Element.Pull=function(e,t){var n,r=60,a=80,i=300,o=0,s=!1,c=$$(e),u=c.siblings('div[data-control="pull"]'),l={onPull:"Pull down to refresh",onRelease:"Release to...",onRefresh:"Loading...",callback:void 0};n=Lungo.Core.mix(l,t);var d=function(){f(0,!0),setTimeout(function(){s=!1,document.removeEventListener("touchmove",T,!1)},i),o=0},f=function(e,t){var n=e>a?a:e;t&&c.addClass("pull"),c.style("-webkit-transform","translate(0, "+n+"px)"),t&&setTimeout(function(){c.removeClass("pull")},i)},h=function(){s=!0,document.addEventListener("touchmove",T,!1),g(n.onRefresh),p(!0),f(r,!0),n.callback&&n.callback.apply(this)},g=function(e){u.find("strong").html(e)},p=function(e){e?u.addClass("refresh"):u.removeClass("refresh")},v=function(e){e?u.addClass("rotate"):u.removeClass("rotate")},T=function(e){e.preventDefault()},m=function(){f(o,!1),p(!1),o>r?(g(n.onRelease),v(!0)):(g(n.onPull),v(!1))},E=function(){o>r?h():d()};return function(){var e=!1,t={};c.bind("touchstart",function(n){1>=c[0].scrollTop&&(e=!0,t=$$.isMobile()?n.touches[0].pageY:n.pageY)}).bind("touchmove",function(n){!s&&e&&(current_y=$$.isMobile()?n.touches[0].pageY:n.pageY,o=current_y-t,o>=0&&(c.style("overflow-y","hidden"),m()))}).bind("touchend",function(){e&&(c.style("overflow-y","scroll"),E()),INI_TOUCH={},e=!1})}(),{hide:d}},Lungo.Router=function(e){var t=e.Constants.CLASS,n=e.Constants.ELEMENT,r=(e.Constants.ERROR,e.Constants.TRIGGER),a=e.Constants.ATTRIBUTE,i="#",o=function(r){r=e.Core.parseUrl(r);var a=e.Element.Cache.section;if(l(r,a)){var i=a.siblings(n.SECTION+r);i.length>0&&(target_transition=i.data("transition"),target_transition&&(g(a),h(a,target_transition)),a.removeClass(t.SHOW).addClass(t.HIDE),i.removeClass(t.HIDE).addClass(t.SHOW),e.Element.Cache.section=i,e.Element.Cache.article=i.find(n.ARTICLE+"."+t.ACTIVE),e.Router.History.add(r),f(a,i))}},s=function(i,s,c){s=e.Core.parseUrl(s);var u=e.Element.Cache.article;if(l(s,u)){o(i);var f=e.Element.Cache.section.find(n.ARTICLE+s);f.length>0&&(d(u)!==d(f)&&(u=e.Element.Cache.section.children(n.ARTICLE)),u.removeClass(t.ACTIVE).trigger(r.UNLOAD),f.addClass(t.ACTIVE).trigger(r.LOAD),e.Element.Cache.article=f,e.View.Article.switchNavItems(s),e.View.Article.switchReferenceItems(s,e.Element.Cache.section),c&&e.View.Article.title(c.data(a.TITLE)))}},c=function(t,n){n=e.Core.parseUrl(n),e.View.Aside.toggle(n)},u=function(){var r=e.Element.Cache.section;r.removeClass(t.SHOW).addClass(t.HIDING),setTimeout(function(){r.removeClass(t.HIDING)},e.Constants.TRANSITION.DURATION),e.Router.History.removeLast(),target=r.siblings(n.SECTION+e.Router.History.current()),h(target,target.data("transition-origin")),target.removeClass(t.HIDE).addClass(t.SHOW),e.Element.Cache.section=target,e.Element.Cache.article=target.find(n.ARTICLE+"."+t.ACTIVE),f(r,target)},l=function(e,t){return e!==i+t.attr("id")?!0:!1},d=function(e){return e.parent("section").attr("id")},f=function(e,t){e.trigger(r.UNLOAD),t.trigger(r.LOAD)},h=function(e,t){e.data("transition",t)},g=function(e){e.data("transition-origin",e.data("transition"))};return{section:o,article:s,aside:c,back:u}}(Lungo),Lungo.Router.History=function(){var e=[],t=function(t){t!==n()&&e.push(t)},n=function(){return e[e.length-1]},r=function(){e.length-=1};return{add:t,current:n,removeLast:r}}(),Lungo.View.Article=function(e){var t=(e.Constants.ELEMENT,e.Constants.CLASS),n=(e.Constants.ATTRIBUTE,{NAVIGATION_ITEM:'a[href][data-router="article"]',REFERENCE_LINK:" a[href][data-article]",TITLE_OF_ARTICLE:"header .title, footer .title",ASIDE_REFERENCE_LIST:"li a.active, li.active"}),r=function(t){t&&e.Element.Cache.section.find(n.TITLE_OF_ARTICLE).text(t)},a=function(r){e.Element.Cache.section.find(n.NAVIGATION_ITEM).removeClass(t.ACTIVE);var a='a[href="'+r+'"][data-router="article"]';e.Element.Cache.section.find(a).addClass(t.ACTIVE),e.Element.Cache.aside&&(aside=e.Element.Cache.aside,aside.find(n.ASIDE_REFERENCE_LIST).removeClass(t.ACTIVE),aside.find(a).addClass(t.ACTIVE).parent().addClass(t.ACTIVE))},i=function(e,t){var r="[data-article="+e.replace("#","")+"]";t.find(n.REFERENCE_LINK).hide().siblings(r).show()};return{title:r,switchReferenceItems:i,switchNavItems:a}}(Lungo),Lungo.View.Aside=function(e){var t=e.Constants.ELEMENT,n=e.Constants.CLASS,r=e.Constants.ATTRIBUTE,a=function(t){if(aside=c(t)){var r=aside.hasClass(n.SHOW);r?e.View.Aside.hide():e.View.Aside.show(aside)}aside=null},i=function(t){if("string"==e.Core.toType(t)&&(t=c(e.Core.parseUrl(t))),t){e.Element.Cache.aside=t;var r=u(t);t.addClass(n.SHOW),e.Element.Cache.section.addClass(r).addClass(n.ASIDE)}t=null},o=function(t){var r=e.Element.Cache.aside||t;if(r){e.Element.Cache.section.removeClass(n.ASIDE).removeClass(n.RIGHT).removeClass(n.SMALL);var a=u(r);a&&e.Element.Cache.section.removeClass(a),setTimeout(function(){r.removeClass(n.SHOW),e.Element.Cache.aside=null},350)}},s=function(t){var r=parseInt(document.body.getBoundingClientRect().width/3,10);t.each(function(){var t=!1,a=e.dom(this),s=a.closest("section"),c=e.dom(a.attr("href"));s.swiping(function(e){if(!s.hasClass("aside")){var r=e.currentTouch.x-e.iniTouch.x,a=Math.abs(e.currentTouch.y-e.iniTouch.y);t=t?!0:r>3*a&&50>r,t?(r=r>256?256:0>r?0:r,c.addClass(n.SHOW),s.vendor("transform","translateX("+r+"px)"),s.vendor("transition-duration","0s")):s.attr("style","")}}),s.swipe(function(e){var n=e.currentTouch.x-e.iniTouch.x;Math.abs(e.currentTouch.y-e.iniTouch.y),s.attr("style",""),n>r&&t?i(c):o(c),t=!1})})},c=function(n){var r=null,a=e.dom(t.ASIDE);if(1==a.length){var i="#"+a[0].id;i==n&&(r=e.dom(a[0]))}else a.length>1&&(r=a.siblings(t.ASIDE+n));return r},u=function(e){var t=e.attr(r.CLASS),a="";return t&&(a+=t.indexOf(n.RIGHT)>-1?n.RIGHT+" ":"",a+=t.indexOf(n.SMALL)>-1?n.SMALL+" ":""),a};return{suscribeEvents:s,toggle:a,show:i,hide:o}}(Lungo),Lungo.Sugar.DatePicker=function(lng,undefined){var calendarInfo=[];calendarInfo.es={mondayFirst:!0,weekDays:["L","M","X","J","V","S","D"],months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"]},calendarInfo.en={mondayFirst:!1,weekDays:["S","M","T","W","T","F","S"],months:["January","February","March","April","May","June","July","August","September","October","November","December"]};var actualDate=new Date,theCallback,createMonthCalendar=function(dateObject,locale){var dateSetter=new Date(dateObject.getTime()),calendarType=eval(calendarInfo[locale]);dateSetter.setDate(1);var weekArray=[],week=0;for(weekArray[0]=Array(7),0==dateSetter.getDay()?calendarType.mondayFirst?weekArray[0][6]=1:weekArray[0][0]=1:calendarType.mondayFirst?weekArray[0][dateSetter.getDay()-1]=1:weekArray[0][dateSetter.getDay()]=1,dateSetter.setDate(dateSetter.getDate()+1);dateSetter.getMonth()==actualDate.getMonth();)1==dateSetter.getDay()&&calendarType.mondayFirst?(week+=1,weekArray[week]=Array(7)):0!=dateSetter.getDay()||calendarType.mondayFirst||(week+=1,weekArray[week]=Array(7)),0==dateSetter.getDay()?calendarType.mondayFirst?weekArray[week][6]=dateSetter.getDate():weekArray[week][0]=dateSetter.getDate():calendarType.mondayFirst?weekArray[week][dateSetter.getDay()-1]=dateSetter.getDate():weekArray[week][dateSetter.getDay()]=dateSetter.getDate(),dateSetter.setDate(dateSetter.getDate()+1);return weekArray},createHTMLDP=function(locale,month,year,dateArray){var date=new Date,htmlCode='<table class="datepicker" id="datePickerId" border="0" cellspacing="0">',calendarType=eval(calendarInfo[locale]);htmlCode+='<tr class="pickerheader">',htmlCode+='<td colspan=2 class="pickerarrow pickerleft" onclick="Lungo.Sugar.DatePicker.reducemonth(\''+locale+'\')"><span class="big icon backward" style="font-size:2em;pading-top:100px;"></span></td>',htmlCode+='<td colspan=3 class="pickermonth"><p>'+calendarType.months[month]+"</p>"+year+"</td>",htmlCode+='<td colspan=2 class="pickerarrow pickerright" onclick="Lungo.Sugar.DatePicker.nextmonth(\''+locale+'\')"><span class="big icon forward" style="font-size:2em;"></span></td></tr>',htmlCode+='<tr class="weekdays">';for(var i=0;7>i;i++)htmlCode+="<td>"+calendarType.weekDays[i]+"</td>";if(htmlCode+="</tr>",date.getMonth()==month)for(var j=0;dateArray.length>j;j++){htmlCode+='<tr class="calendardays">';for(var z=0;dateArray[j].length>z;z++)htmlCode+=null!=dateArray[j][z]?dateArray[j][z]==date.getDate()?'<td class="datePickerToday" onclick="Lungo.Sugar.DatePicker.executeCallback('+dateArray[j][z]+","+month+","+year+')"><div class="today">'+dateArray[j][z]+"</div></td>":'<td class="datePickerDay" onclick="Lungo.Sugar.DatePicker.executeCallback('+dateArray[j][z]+","+month+","+year+')">'+dateArray[j][z]+"</td>":'<td class="datePickerDay"></td>';htmlCode+="</tr>"}else for(var j=0;dateArray.length>j;j++){htmlCode+='<tr class="calendardays">';for(var z=0;dateArray[j].length>z;z++)htmlCode+=null!=dateArray[j][z]?'<td class="datePickerDay" onclick="Lungo.Sugar.DatePicker.executeCallback('+dateArray[j][z]+","+month+","+year+')">'+dateArray[j][z]+"</td>":'<td class="datePickerDay"></td>';htmlCode+="</tr>"}return htmlCode+='<tr class="pickerfooter" onclick="Lungo.Sugar.DatePicker.hide()"><td colspan=7><span class="big icon cancel" style="font-size:2em;"></span></td></tr>',htmlCode+="</table>"},reducemonth=function(e){actualDate.setMonth(actualDate.getMonth()-1);var t=createMonthCalendar(actualDate,e);$$(".dateContainer .datePickerObject").html(createHTMLDP(e,actualDate.getMonth(),actualDate.getFullYear(),t))},nextmonth=function(e){actualDate.setMonth(actualDate.getMonth()+1);var t=createMonthCalendar(actualDate,e);$$(".dateContainer .datePickerObject").html(createHTMLDP(e,actualDate.getMonth(),actualDate.getFullYear(),t))},executeCallback=function(e,t,n){theCallback(e,t,n),hide()},startDatepicker=function(e,t){theCallback=t,actualDate.setDate(1);var n=createMonthCalendar(actualDate,e);show(createHTMLDP(e,actualDate.getMonth(),actualDate.getFullYear(),n))},show=function(e){$$("body").append('<div class="dateContainer"><div class="datePickerObject"></div></div>'),$$(".dateContainer .datePickerObject").html(e)},hide=function(){$$(".dateContainer").remove(),actualDate=new Date},getMonthName=function(e,t){return calendarInfo[e].months[t]};return{startDatepicker:startDatepicker,hide:hide,executeCallback:executeCallback,reducemonth:reducemonth,nextmonth:nextmonth,getMonthName:getMonthName}}(Lungo),Lungo.Sugar.AutoComplete=function(){var e,t,n;_result_item_tag="li",_before=function(){},_after=function(){};var r=function(r){return r.el&&r.results_el?(e=r.el,t=r.results_el,r.result_item_tag&&(_result_item_tag=r.result_item_tag),r.choices&&(n=r.choices),r.before&&(_before=r.before),r.after&&(_after=r.after),e.on("click",_before),e.on("keyup",o),void 0):(console.error("AutoComplete needs more to get setup."),void 0)},a=function(e){n=e},i=function(){return n},o=function(){if(t.empty(),""!=e.val()){for(var r=e.val().toLowerCase(),a=0,i=n.length;i>a;a++)0==n[a].toLowerCase().indexOf(r)&&t.append("<"+_result_item_tag+">"+n[a]+"</"+_result_item_tag+">");t.find(_result_item_tag).on("click",s)}},s=function(n){e.val(n.currentTarget.textContent)[0].focus(),_after(e,n),t.empty()};return{init:r,getChoices:i,setChoices:a}};